{
  "name": "claude-army",
  "version": "2.0.0",
  "description": "Multi-agent development army with autonomous operation capabilities",

  "architect": {
    "name": "Chief Architect",
    "model": "opus",
    "fallback": {
      "model": "sonnet-4.5",
      "comment": "Falls back to Sonnet 4.5 (NOT 3.5) when Opus exhausted",
      "triggers": ["token_limit", "rate_limit", "availability"],
      "tokenThreshold": 0.8,
      "automatic": true
    },
    "type": "system-architect",
    "role": "Strategic decision-making and project guidance",
    "capabilities": [
      "System design",
      "Architecture decisions",
      "Agent coordination",
      "User requirement analysis",
      "Technology stack selection",
      "Compaction management",
      "Requirements discovery",
      "Memory persistence"
    ],
    "autonomousAuthority": {
      "lowRisk": true,
      "mediumRisk": true,
      "highRisk": false,
      "requiresDocumentation": true
    },
    "priority": "critical"
  },

  "codingAgents": [
    {
      "name": "TDD Coding Agent",
      "type": "coder",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 1"
      },
      "role": "Test-driven development specialist",
      "specialties": [
        "Red-Green-Refactor cycle",
        "Test-first development",
        "Unit testing",
        "Integration testing",
        "Test coverage analysis",
        "TDD best practices"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "requiresArchitectApproval": true
      }
    },
    {
      "name": "Python Specialist",
      "type": "python-expert",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 2"
      },
      "languages": ["python"],
      "specialties": [
        "FastAPI/Flask",
        "Django",
        "Data processing",
        "ML/AI integration",
        "Async/await patterns"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": false,
        "requiresArchitectApproval": true
      }
    },
    {
      "name": "Swift Specialist",
      "type": "ios-developer",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 3"
      },
      "languages": ["swift"],
      "specialties": [
        "SwiftUI",
        "UIKit",
        "Core Data",
        "Combine",
        "iOS app architecture"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": false,
        "requiresArchitectApproval": true
      }
    },
    {
      "name": "Go Specialist",
      "type": "backend-dev",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 4"
      },
      "languages": ["go"],
      "specialties": [
        "Microservices",
        "Concurrency",
        "gRPC",
        "Performance optimization",
        "Cloud-native applications"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": false,
        "requiresArchitectApproval": true
      }
    },
    {
      "name": "Rust Specialist",
      "type": "backend-dev",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 5"
      },
      "languages": ["rust"],
      "specialties": [
        "Systems programming",
        "Memory safety",
        "Performance-critical code",
        "WebAssembly",
        "Async Rust"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": false,
        "requiresArchitectApproval": true
      }
    },
    {
      "name": "Flutter Specialist",
      "type": "mobile-developer",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 6"
      },
      "languages": ["dart", "flutter"],
      "specialties": [
        "Cross-platform mobile",
        "State management",
        "Native integrations",
        "UI/UX implementation",
        "Performance optimization"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": false,
        "requiresArchitectApproval": true
      }
    }
  ],

  "integrationAgents": [
    {
      "name": "API Explorer",
      "type": "researcher",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 7"
      },
      "role": "API exploration and integration analysis",
      "responsibilities": [
        "Explore and document third-party APIs",
        "Test API endpoints and authentication flows",
        "Create integration POCs",
        "Analyze API rate limits and quotas",
        "Document API capabilities and limitations",
        "Generate API client code",
        "Create integration test suites",
        "Monitor API changes and deprecations"
      ],
      "specialties": [
        "REST API exploration",
        "GraphQL API analysis",
        "OpenAPI/Swagger documentation",
        "API authentication methods",
        "Rate limiting strategies",
        "API versioning",
        "Webhook integration",
        "API performance testing"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "requiresDocumentation": true
      }
    },
    {
      "name": "Salesforce API Specialist",
      "type": "backend-dev",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 8"
      },
      "role": "Salesforce API integration expert",
      "responsibilities": [
        "Salesforce REST API integration",
        "SOQL query optimization",
        "Salesforce object mapping",
        "OAuth 2.0 authentication with Salesforce",
        "Bulk API operations",
        "Salesforce streaming API",
        "Custom Salesforce object integration",
        "Salesforce workflow automation",
        "Data synchronization with Salesforce",
        "Error handling and retry logic"
      ],
      "specialties": [
        "Salesforce REST API",
        "Salesforce SOAP API",
        "SOQL and SOSL queries",
        "Salesforce Bulk API",
        "Salesforce Streaming API",
        "Platform Events",
        "Change Data Capture",
        "Salesforce Connect",
        "Apex integration",
        "Lightning Platform API"
      ],
      "apis": [
        "REST API v59.0+",
        "SOAP API",
        "Bulk API 2.0",
        "Streaming API",
        "Metadata API",
        "Tooling API",
        "Analytics API"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "requiresDocumentation": true
      }
    },
    {
      "name": "Authentik API Specialist",
      "type": "backend-dev",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 9"
      },
      "role": "Authentik authentication and API integration expert",
      "responsibilities": [
        "Authentik OAuth2/OIDC integration",
        "User provisioning via Authentik API",
        "Group and role management",
        "Application provider configuration",
        "SAML integration with Authentik",
        "LDAP integration",
        "Authentik flow customization",
        "Multi-factor authentication setup",
        "User attribute synchronization",
        "Authentik webhook integration"
      ],
      "specialties": [
        "Authentik REST API",
        "OAuth2/OIDC flows",
        "SAML 2.0 integration",
        "LDAP provider configuration",
        "Authentik Outpost setup",
        "User and group management API",
        "Application proxy configuration",
        "Policy engine integration",
        "Flow execution API",
        "Event and audit logging"
      ],
      "apis": [
        "Core API (/api/v3/)",
        "OAuth2 Provider API",
        "SAML Provider API",
        "LDAP Provider API",
        "Flows API",
        "Stages API",
        "Events API"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "requiresDocumentation": true
      }
    }
  ],

  "supportAgents": [
    {
      "name": "Documentation Lead",
      "type": "coder",
      "model": "gpt-4",
      "ccproxyMapping": {
        "apiAlias": "gpt-4",
        "ollama": "qwen-quality-128k:latest",
        "phase": "Phase 2 - Agent 15"
      },
      "role": "Code-level documentation and API reference",
      "responsibilities": [
        "Inline code comments",
        "API reference documentation",
        "Code examples and snippets",
        "Function/method documentation",
        "Docstrings and JSDoc",
        "README code sections"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "requiresDocumentation": false
      }
    },
    {
      "name": "Technical Writer",
      "type": "technical-writer",
      "model": "sonnet-4.5",
      "role": "Architecture documentation and user guides",
      "responsibilities": [
        "Architecture documentation",
        "System design diagrams",
        "User guides and tutorials",
        "How-to guides",
        "Conceptual documentation",
        "Integration guides",
        "Deployment guides",
        "Best practices documentation"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "requiresDocumentation": false
      }
    },
    {
      "name": "User Experience Designer",
      "type": "ux-designer",
      "model": "sonnet-4.5",
      "role": "User experience design and validation",
      "responsibilities": [
        "UI/UX design and mockups",
        "User flow analysis",
        "Accessibility compliance (WCAG)",
        "Usability testing",
        "Design validation",
        "Mobile-first design review",
        "User journey mapping",
        "Final quality validation before completion"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "canBlockDeployment": true,
        "requiresDocumentation": true
      }
    },
    {
      "name": "QA Engineer",
      "type": "test-automator",
      "model": "gpt-4",
      "ccproxyMapping": {
        "apiAlias": "gpt-4",
        "ollama": "qwen-quality-128k:latest",
        "phase": "Phase 2 - Agent 13"
      },
      "role": "Integration testing and quality assurance",
      "responsibilities": [
        "Integration test suites",
        "End-to-end testing",
        "Test automation",
        "CI/CD pipeline tests",
        "Performance testing",
        "Autonomous test fixing"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "canFixTests": true,
        "requiresDocumentation": true
      }
    },
    {
      "name": "Security Auditor",
      "type": "security-auditor",
      "model": "gpt-4",
      "ccproxyMapping": {
        "apiAlias": "gpt-4",
        "ollama": "qwen-quality-128k:latest",
        "phase": "Phase 2 - Agent 14"
      },
      "role": "Security analysis and vulnerability detection",
      "responsibilities": [
        "Code security review",
        "Vulnerability scanning",
        "OWASP compliance",
        "Authentication/authorization review",
        "Dependency audits"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "highRisk": false,
        "requiresDocumentation": true,
        "canBlockDeployment": true
      }
    },
    {
      "name": "Credential Manager",
      "type": "coder",
      "model": "haiku",
      "ccproxyMapping": {
        "apiAlias": "claude-3-haiku",
        "ollama": "qwen-fast:latest",
        "phase": "Phase 1 - Agent 11"
      },
      "role": "Secure credential management",
      "responsibilities": [
        "Credential storage strategy",
        "Secrets management",
        "Environment variable handling",
        "Credential rotation tracking",
        "Security best practices"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": false,
        "requiresSecurityApproval": true
      }
    },
    {
      "name": "DevOps Engineer",
      "type": "deployment-engineer",
      "model": "sonnet-4.5",
      "ccproxyMapping": {
        "apiAlias": "claude-3-5-sonnet",
        "ollama": "qwen2.5-coder:32b-instruct",
        "phase": "Phase 1 - Agent 10"
      },
      "role": "Infrastructure, builds, and deployments",
      "responsibilities": [
        "Docker and docker-compose configuration",
        "Kubernetes manifests and deployments",
        "AWS infrastructure (ECS, CloudFormation, EC2)",
        "CI/CD pipeline setup (GitHub Actions, GitLab CI)",
        "Container orchestration and scaling",
        "Infrastructure as Code (Terraform, CloudFormation)",
        "Monitoring and logging setup",
        "Production deployment automation",
        "Blue-green and canary deployments",
        "Load balancing and auto-scaling"
      ],
      "specialties": [
        "Docker & Docker Compose",
        "Kubernetes (EKS, GKE, AKS)",
        "AWS Services (ECS, ECR, CloudFormation, Lambda)",
        "CI/CD Automation",
        "Infrastructure as Code",
        "Container Security",
        "Monitoring (Prometheus, Grafana, CloudWatch)",
        "Multi-environment deployments",
        "Zero-downtime deployments",
        "Cost optimization"
      ],
      "autonomousAuthority": {
        "lowRisk": true,
        "mediumRisk": true,
        "highRisk": false,
        "canDeployNonProd": true,
        "requiresApprovalForProd": true
      }
    }
  ],

  "coordination": {
    "topology": "hierarchical",
    "leader": "architect",
    "mcpServers": [
      "claude-flow@alpha",
      "ruv-swarm"
    ],
    "memorySharing": true,
    "consensusRequired": [
      "architecture decisions",
      "technology selection",
      "security policies",
      "API integration strategies"
    ],
    "autonomousOperation": {
      "enabled": true,
      "maxDurationHours": 8,
      "checkpointIntervalMinutes": 30,
      "heartbeatIntervalMinutes": 10,
      "errorRecoveryAttempts": 3,
      "escalationThreshold": 3
    }
  },

  "llmRouting": {
    "enabled": true,
    "endpoints": {
      "coding": {
        "enabled": true,
        "type": "openai-compatible",
        "url": "https://coder.visiquate.com",
        "comment": "ccproxy routes to Ollama qwen models via API aliases",
        "models": {
          "claude-3-5-sonnet": {
            "ollama": "qwen2.5-coder:32b-instruct",
            "agents": "1-10 (TDD, Python, Swift, Go, Rust, Flutter, API Explorer, Salesforce, Authentik, DevOps)",
            "contextWindow": 32768,
            "description": "32B coding model for Phase 1"
          },
          "claude-3-haiku": {
            "ollama": "qwen-fast:latest",
            "agents": "11 (Credential Manager)",
            "contextWindow": 32768,
            "description": "7B lightweight model for Phase 1"
          },
          "gpt-4": {
            "ollama": "qwen-quality-128k:latest",
            "agents": "13-15 (QA, Security, Documentation)",
            "contextWindow": 131072,
            "description": "32B reasoning model for Phase 2"
          }
        },
        "temperature": 0.7,
        "maxTokens": 4096,
        "headers": {},
        "additionalParams": {}
      }
    },
    "rules": {
      "architectureTasks": "claude",
      "codingTasks": "custom-if-enabled",
      "fallbackToClaude": true,
      "comment": "Chief Architect uses real Claude API (opus â†’ sonnet-4.5), all other agents route through ccproxy"
    }
  },

  "knowledgeManager": {
    "enabled": true,
    "perRepositoryContext": true,
    "baseDir": "data/knowledge",
    "embeddingDim": 384,
    "autoCapture": {
      "enabled": true,
      "preCompaction": true,
      "postCompaction": true,
      "triggers": {
        "contextThreshold": 0.8,
        "decisionMade": true,
        "implementationComplete": true,
        "issueResolved": true
      }
    },
    "knowledgeTypes": [
      "architecture",
      "decision",
      "implementation",
      "configuration",
      "credential",
      "issue",
      "pattern",
      "general"
    ],
    "retention": {
      "maxAgeDays": 90,
      "autoCleanup": false
    },
    "integration": {
      "mcpMemory": true,
      "hooks": true,
      "agents": ["all"]
    }
  },

  "workflow": {
    "phases": [
      "requirements_discovery",
      "specification_generation",
      "architecture_design",
      "implementation",
      "testing",
      "security_audit",
      "documentation",
      "deployment"
    ],
    "parallel_execution": true,
    "hooks_enabled": true,
    "compaction_management": {
      "enabled": true,
      "preCompactionExport": true,
      "postCompactionRestore": true,
      "architectOwnsLifecycle": true
    }
  },

  "decisionAuthority": {
    "lowRisk": {
      "examples": ["code formatting", "minor version updates", "test strategies", "file organization"],
      "requiresApproval": false,
      "requiresDocumentation": false
    },
    "mediumRisk": {
      "examples": ["technology choices within stack", "API design", "database schema", "security approaches"],
      "requiresApproval": false,
      "requiresArchitectApproval": true,
      "requiresDocumentation": true
    },
    "highRisk": {
      "examples": ["new external services", "major architecture changes", "breaking API changes", "production deployments"],
      "requiresApproval": true,
      "requiresUserCheckpoint": true,
      "requiresDocumentation": true
    }
  }
}
